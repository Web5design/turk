<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting started with the Turk Framework &mdash; Turk v0.1.1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '#',
        VERSION:     '0.1.1',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Turk v0.1.1 documentation" href="index.html" />
    <link rel="next" title="Configuring Turk" href="configuration.html" />
    <link rel="prev" title="Overview" href="overview.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="configuration.html" title="Configuring Turk"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Overview"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Turk v0.1.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="getting-started-with-the-turk-framework">
<h1>Getting started with the Turk Framework<a class="headerlink" href="#getting-started-with-the-turk-framework" title="Permalink to this headline">¶</a></h1>
<div class="section" id="installing">
<h2>Installing<a class="headerlink" href="#installing" title="Permalink to this headline">¶</a></h2>
<p>Turk is a package on the Python Package Index (<a class="reference external" href="http://pypi.python.org/pypi">http://pypi.python.org/pypi</a>), and
can be installed using the easy_install or pip command-line tools:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>easy_install Turk

<span class="nv">$ </span>pip install Turk
</pre></div>
</div>
<p>It can also be installed from source, by downloading the latest source archive
from a variety of places and using python:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>tar xvzf Turk-0.1.1.tar.gz
<span class="nv">$ </span><span class="nb">cd </span>Turk-0.1.1/
<span class="nv">$ </span><span class="o">[</span>sudo<span class="o">]</span> python setup.py install
</pre></div>
</div>
<p>Needless to say, Python needs to be installed to do this. Turk works with any
version in the 2.5-2.6 series, which are installed by default on many platforms.
The other main dependencies are the D-Bus library and its python bindings (usually
called python-dbus). These can be obtained from <a class="reference external" href="http://dbus.freedesktop.org/releases/">freedesktop.org</a>.</p>
</div>
<div class="section" id="setting-up-the-configuration">
<h2>Setting up the configuration<a class="headerlink" href="#setting-up-the-configuration" title="Permalink to this headline">¶</a></h2>
<p>Setting up a customized configuration file is a very important step for every
Turk setup. This file is not only used to configure the framework to work
properly on your system, but also to organize drivers to be run and servers to
connect to. It&#8217;s written in YAML <a class="footnote-reference" href="#yaml" id="id1">[1]</a>, and can be placed anywhere on the
system.</p>
<div class="section" id="why-use-yaml">
<h3>Why use YAML?<a class="headerlink" href="#why-use-yaml" title="Permalink to this headline">¶</a></h3>
<p>According to the YAML website:</p>
<blockquote>
YAML™ (rhymes with “camel”) is a human-friendly, cross language, Unicode
based data serialization language designed around the common native data
types of agile programming languages. It is broadly useful for programming
needs ranging from configuration files to Internet messaging to object
persistence to data auditing.</blockquote>
<p>Many other data formats are used for software configuration, including XML, INI files,
and programming languages themselves. However, YAML has two significant
advantages, namely that it is one of the most human-readable formats, and that
it maps well to many logical data types. This allows the configuration file to
be easily edited by both users and software.</p>
</div>
<div class="section" id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<p>The configuration file has a set of known defaults, which means an empty file
will result in a set of reasonably sane values being used. However, these values
may change between versions, and shouldn&#8217;t be relied upon for important
settings. A safe method is to start with a configuration that specifies all
values as the default, and change them as necessary. That way, when the software
is upgraded, only new values will be unspecified, and should be set to
non-disruptive values (i.e. new features will be turned off by default).</p>
<p>The following is a basic template to start off with:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># Global configuration</span>
<span class="l-Scalar-Plain">global</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">bus</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">SessionBus</span>

<span class="c1"># control interface and launcher (corectl.py)</span>
<span class="l-Scalar-Plain">turkctl</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">pidfile</span><span class="p-Indicator">:</span> <span class="s">&#39;turk.pid&#39;</span>
    <span class="l-Scalar-Plain">debug</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">True</span>

<span class="c1"># bridge (drivers &lt;-&gt; XMPP &lt;-&gt; apps)</span>
<span class="l-Scalar-Plain">bridge</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">server</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">macpro.local</span>
    <span class="l-Scalar-Plain">port</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">5222</span>
    <span class="l-Scalar-Plain">username</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">platform@macpro.local</span>
    <span class="l-Scalar-Plain">password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">password</span>
    <span class="l-Scalar-Plain">debug</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">True</span>

<span class="c1"># spawner (starts/stops and manages drivers)</span>
<span class="l-Scalar-Plain">spawner</span><span class="p-Indicator">:</span>
    <span class="c1"># Location of all drivers (prefixed to all driver filenames)</span>
    <span class="l-Scalar-Plain">drivers</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">/usr/share/turk/drivers</span>

    <span class="c1"># Add drivers that should be automatically started here along with their</span>
    <span class="c1"># environment variables and command line arguments</span>
    <span class="l-Scalar-Plain">autostart</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span>
        <span class="p-Indicator">{</span><span class="s">&#39;device_id&#39;</span><span class="p-Indicator">:</span> <span class="nv">1</span><span class="p-Indicator">,</span> <span class="s">&#39;filename&#39;</span><span class="p-Indicator">:</span> <span class="s">&#39;tick.py&#39;</span><span class="p-Indicator">,</span> <span class="s">&#39;env&#39;</span><span class="p-Indicator">:</span> <span class="p-Indicator">{},</span> <span class="s">&#39;args&#39;</span><span class="p-Indicator">:</span> <span class="p-Indicator">[]},</span>
        <span class="c1">#{&#39;device_id&#39;: 2, &#39;filename&#39;:&#39;rgb_lamp.py&#39;, &#39;env&#39;:{&#39;DEVICE_ADDRESS&#39;:&#39;0x0&#39;}, &#39;args&#39;: []},</span>
    <span class="p-Indicator">]</span>
    <span class="l-Scalar-Plain">debug</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">True</span>

<span class="c1"># xbeed (handles XBee communication)</span>
<span class="l-Scalar-Plain">xbeed</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">name</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">xbee0</span>
    <span class="l-Scalar-Plain">port</span><span class="p-Indicator">:</span> <span class="s">&#39;/dev/ttys8&#39;</span>
    <span class="l-Scalar-Plain">baudrate</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">9600</span>
    <span class="l-Scalar-Plain">escaping</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">True</span>
    <span class="l-Scalar-Plain">debug</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">True</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="writing-your-first-driver">
<h2>Writing your first driver<a class="headerlink" href="#writing-your-first-driver" title="Permalink to this headline">¶</a></h2>
<p>Proin neque elit, mollis vel, tristique nec, varius consectetuer, lorem. Nam
malesuada ornare nunc. Duis turpis turpis, fermentum a, aliquet quis, sodales
at, dolor. Duis eget velit eget risus fringilla hendrerit. Nulla facilisi.
Mauris turpis pede, aliquet ac, mattis sed, consequat in, massa. Cum sociis
natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.
Etiam egestas posuere metus. Aliquam erat volutpat. Donec non tortor. Vivamus
posuere nisi mollis dolor. Quisque porttitor nisi ac elit. Nullam tincidunt
ligula vitae nulla:</p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="c1"># This is a code sample</span>
<span class="l-Scalar-Plain">class Driver(dbus.service.Object)</span><span class="p-Indicator">:</span>
    <span class="s">&quot;&quot;&quot;</span><span class="nv"> </span><span class="s">This</span><span class="nv"> </span><span class="s">interfaces</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">device</span><span class="nv"> </span><span class="s">to</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">Turk</span><span class="nv"> </span><span class="s">Framework</span><span class="nv"> </span><span class="s">&quot;&quot;&quot;</span>
    <span class="l-Scalar-Plain">def __init__(self, address, bus)</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">self.bus = bus</span>
        <span class="l-Scalar-Plain">self.address = address</span>
        <span class="l-Scalar-Plain">super(dbus.service.Object, self).__init__()</span>

    <span class="l-Scalar-Plain">def recieve(message)</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">do_something(message)</span>
</pre></div>
</div>
<p>This is some C++ code:</p>
<div class="highlight-c++"><div class="highlight"><pre><span class="kt">void</span> <span class="n">TurkDriver</span><span class="o">::</span><span class="n">ReceiveMessage</span><span class="p">(</span><span class="n">Message</span> <span class="n">msg</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="n">doSomething</span><span class="p">(</span><span class="n">msg</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Vivamus sit amet risus et ipsum viverra malesuada. Duis luctus. Curabitur
adipiscing metus et felis. Vestibulum tortor. Pellentesque purus. Donec
pharetra, massa.</p>
</div>
<div class="section" id="writing-and-deploying-a-tapp">
<h2>Writing and deploying a Tapp<a class="headerlink" href="#writing-and-deploying-a-tapp" title="Permalink to this headline">¶</a></h2>
<p>Malesuada elementum, nisi. Integer vitae enim quis risus aliquet gravida.
Curabitur vel lorem vel erat dapibus lobortis. Donec dignissim tellus at arcu.
Quisque molestie pulvinar sem.</p>
<p>Nulla magna neque, ullamcorper tempus, luctus eget, malesuada ut, velit. Morbi
felis. Praesent in purus at ipsum cursus posuere. Morbi bibendum facilisis
eros. Phasellus aliquam sapien in erat. Praesent venenatis diam dignissim dui.
Praesent risus erat, iaculis ac, dapibus sed, imperdiet ac, erat. Nullam sed
ipsum. Phasellus non dolor. Donec ut elit.</p>
<p>Sed risus.</p>
<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Vestibulum sem lacus,
commodo vitae, aliquam ut, posuere eget, dui. Praesent massa dui, mattis et,
vehicula.</p>
</div>
<div class="section" id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline">¶</a></h2>
<p>Justo ac sem.</p>
<p>Pellentesque at dolor non lectus sagittis semper. Donec quis mi. Duis eget
pede. Phasellus arcu tellus, ultricies id, consequat id, lobortis nec, diam.
Suspendisse sed nunc. Pellentesque id magna. Morbi interdum quam at est.
Maecenas eleifend mi in urna. Praesent et lectus ac nibh luctus viverra. In vel
dolor sed nibh sollicitudin tincidunt. Ut consequat nisi sit amet nibh. Nunc mi
tortor, tristique sit amet, rhoncus porta, malesuada elementum, nisi. Integer
vitae enim quis risus aliquet gravida. Curabitur vel lorem vel erat dapibus
lobortis. Donec dignissim tellus at arcu. Quisque molestie pulvinar sem.</p>
<p>Nulla magna neque, ullamcorper tempus, luctus eget.</p>
<p class="rubric">Footnotes</p>
<table class="docutils footnote" frame="void" id="yaml" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1">[1]</a></td><td>YAML: YAML Ain&#8217;t Markup Language (see <a class="reference external" href="http://yaml.org">yaml.org</a>)</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#">Getting started with the Turk Framework</a><ul>
<li><a class="reference external" href="#installing">Installing</a></li>
<li><a class="reference external" href="#setting-up-the-configuration">Setting up the configuration</a><ul>
<li><a class="reference external" href="#why-use-yaml">Why use YAML?</a></li>
<li><a class="reference external" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference external" href="#writing-your-first-driver">Writing your first driver</a></li>
<li><a class="reference external" href="#writing-and-deploying-a-tapp">Writing and deploying a Tapp</a></li>
<li><a class="reference external" href="#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="overview.html"
                                  title="previous chapter">Overview</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="configuration.html"
                                  title="next chapter">Configuring Turk</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/getting_started.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="configuration.html" title="Configuring Turk"
             >next</a> |</li>
        <li class="right" >
          <a href="overview.html" title="Overview"
             >previous</a> |</li>
        <li><a href="index.html">Turk v0.1.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2010, Rob O&#39;Dwyer.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.4.
    </div>
  </body>
</html>